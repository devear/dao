{"remainingRequest":"/home/four/daoconsensus/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/four/daoconsensus/src/views/Market.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/four/daoconsensus/src/views/Market.vue","mtime":1616144685000},{"path":"/home/four/daoconsensus/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/four/daoconsensus/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/four/daoconsensus/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/four/daoconsensus/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgVHJvbldlYiBmcm9tICd0cm9ud2ViJw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnTWFya2V0JywNCiAgY29tcG9uZW50czogew0KICAgIA0KICB9LA0KICBkYXRhOiAoKSA9PiAoew0KICAgIG92ZXJsYXk6IGZhbHNlLA0KICAgIGxvYWRpbmc6IGZhbHNlLA0KICAgIGJ1eTogMCwNCiAgICBmdWxsTm9kZTogImh0dHBzOi8vYXBpLnNoYXN0YS50cm9uZ3JpZC5pbyIsDQogICAgc29saWRpdHlOb2RlOiAiaHR0cHM6Ly9hcGkuc2hhc3RhLnRyb25ncmlkLmlvIiwNCiAgICBldmVudFNlcnZlcjogImh0dHBzOi8vYXBpLnNoYXN0YS50cm9uZ3JpZC5pbyIsDQogICAgcHJpdmF0ZUtleTogJzc5NWIwMDYwZDI4MzIwZDAzNDhkYjRkOWFiZmViZTY2MjkwMzRkZTAzYzExYTE1Y2VjODY5NWNmMzY0NjMwMmEnLA0KICAgIC8vdHJjMjBDb250cmFjdEFkZHJlc3M6ICJURjk0dWJEUW8yY1A3OFV0eDRlRW90cDRpeUJlQndOd3BCIiwgLy8iVFI3TkhxamVLUXhHVENpOHE4Wlk0cEw4b3RTemdqTGo2dCIsDQogICAgdHI6IHRydWUsDQogICAgdG9rZW46IG51bGwsDQogICAgY29udHJhY3Q6IG51bGwsDQogICAgdHJvbldlYjogbnVsbCwNCiAgICBkZWNpbWFsczogMTAwMDAwMCwNCiAgICBwYXRoOiBbDQogICAgICB7c3JjOiByZXF1aXJlKCdAL2Fzc2V0cy9pbWcvMS5qcGcnKSwgdGl0bGU6ICfQn9Cw0LrQtdGCIDEwJCcsIHN1bW06IDEwfSwNCiAgICAgIHtzcmM6IHJlcXVpcmUoJ0AvYXNzZXRzL2ltZy8yLmpwZycpLCB0aXRsZTogJ9Cf0LDQutC10YIgMTAwJCcsIHN1bW06IDEwMH0sDQogICAgICB7c3JjOiByZXF1aXJlKCdAL2Fzc2V0cy9pbWcvMy5qcGcnKSwgdGl0bGU6ICfQn9Cw0LrQtdGCIDMwMCQnLCBzdW1tOiAzMDB9LA0KICAgICAge3NyYzogcmVxdWlyZSgnQC9hc3NldHMvaW1nLzQuanBnJyksIHRpdGxlOiAn0J/QsNC60LXRgiAxMDAwJCcsIHN1bW06IDEwMDB9LA0KICAgICAge3NyYzogcmVxdWlyZSgnQC9hc3NldHMvaW1nLzUuanBnJyksIHRpdGxlOiAn0J/QsNC60LXRgiAyNTAwJCcsIHN1bW06IDI1MDB9LA0KICAgICAge3NyYzogcmVxdWlyZSgnQC9hc3NldHMvaW1nLzYuanBnJyksIHRpdGxlOiAn0J/QsNC60LXRgiA1MDAwJCcsIHN1bW06IDUwMDB9DQogICAgXQ0KICB9KSwNCiAgYXN5bmMgbW91bnRlZCgpew0KICAgIHRoaXMudHJvbldlYiA9IG5ldyBUcm9uV2ViKHRoaXMuZnVsbE5vZGUsIHRoaXMuc29saWRpdHlOb2RlLCB0aGlzLmV2ZW50U2VydmVyLCB0aGlzLnByaXZhdGVLZXkpDQogICAgdGhpcy50b2tlbiA9IGF3YWl0IHRoaXMudHJvbldlYi5jb250cmFjdCgpLmF0KCJUWWpzYUw0QmlzWjNWTUtHTXRpNHlTdmhCVVlBeUMxNFRjIikNCiAgICB0aGlzLmNvbnRyYWN0ID0gYXdhaXQgdGhpcy50cm9uV2ViLmNvbnRyYWN0KCkuYXQoIlRCQ2JVWGFEZWsxdjdkSk1Yb3VMTmhNUVJGY2tlbTQyeUMiKQ0KICAgIA0KICB9LA0KICBtZXRob2RzOiB7DQogICAgYXN5bmMgYnV5UHJvZHVjdCgpew0KICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQ0KICAgICAgdGhpcy5vdmVybGF5ID0gZmFsc2UNCiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlDQogICAgICB0cnkgew0KICAgICAgICAgIGF3YWl0IHRoaXMudG9rZW4udHJhbnNmZXIoJ1RCQ2JVWGFEZWsxdjdkSk1Yb3VMTmhNUVJGY2tlbTQyeUMnLCAodGhpcy5idXkgKiAxMDAwMDAwKS50b1N0cmluZygpKS5zZW5kKHsNCiAgICAgICAgICAgICAgZmVlTGltaXQ6MV8wMDBfMDAwXzAwMCwNCiAgICAgICAgICAgICAgY2FsbFZhbHVlOjAsDQogICAgICAgICAgICAgIHNob3VsZFBvbGxSZXNwb25zZTp0cnVlDQogICAgICAgICAgfSkNCiAgICAgIH0gY2F0Y2goZXJyb3IpIHsNCiAgICAgICAgICBjb25zb2xlLmVycm9yKCJ0cmlnZ2VyIHRva2VuIGVycm9yIixlcnJvcikNCiAgICAgIH0NCiAgICAgIHRyeSB7DQogICAgICAgICAgYXdhaXQgdGhpcy5jb250cmFjdC50cmFuc2ZlcigpLnNlbmQoew0KICAgICAgICAgICAgICBmZWVMaW1pdDoxXzAwMF8wMDBfMDAwLA0KICAgICAgICAgICAgICBjYWxsVmFsdWU6MCwNCiAgICAgICAgICAgICAgc2hvdWxkUG9sbFJlc3BvbnNlOnRydWUNCiAgICAgICAgICB9KQ0KICAgICAgfSBjYXRjaChlcnJvcikgew0KICAgICAgICAgIGNvbnNvbGUuZXJyb3IoInRyaWdnZXIgc21hcnQgY29udHJhY3QgZXJyb3IiLGVycm9yKQ0KICAgICAgfQ0KICAgIH0sDQogICAgb3Blbk1vZGFsKHN1bW0pew0KICAgICAgdGhpcy5vdmVybGF5ID0gIXRoaXMub3ZlcmxheQ0KICAgICAgdGhpcy5idXkgPSBzdW1tDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["Market.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Market.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <v-container fluid>\r\n    <v-row justify=\"center\">\r\n      <v-col\r\n        v-for=\"ii in path\"\r\n        :key=\"ii.title\"\r\n        cols=\"12\"\r\n        md=\"4\"\r\n      >\r\n        <v-card class=\"blue darken-2\"\r\n        :elevation=\"15\"\r\n        >\r\n          <v-img\r\n            :src=\"ii.src\"\r\n            class=\"align-end\"\r\n            justify=\"center\"\r\n          >\r\n          </v-img>\r\n\r\n          <v-card-actions class=\"white--text\">\r\n            <v-card-title v-text=\"ii.title\" class=\"body-2\"></v-card-title>\r\n            <v-spacer></v-spacer>\r\n            <v-btn\r\n            @click=\"openModal(ii.summ)\"\r\n            >\r\n              купить\r\n            </v-btn>\r\n          </v-card-actions>\r\n        </v-card>\r\n      </v-col>\r\n    </v-row>\r\n    <v-overlay :value=\"overlay\">\r\n      <v-alert\r\n        color=\"#2A3B4D\"\r\n        dense\r\n      >\r\n        <p class=\"text-center\">\r\n          Подтвердите оплату пакета {{this.buy}} $\r\n        </p>\r\n        <div class=\"text-center\">\r\n          <v-btn\r\n          @click=\"buyProduct()\"\r\n          :loading=\"loading\"\r\n          >\r\n            Оплатить\r\n          </v-btn>\r\n        </div>\r\n        <br>\r\n        <div class=\"text-center\">\r\n          <v-btn\r\n          @click=\"overlay = !overlay\"\r\n          :loading=\"loading\"\r\n          >\r\n            Отменить\r\n          </v-btn>\r\n        </div>\r\n      </v-alert>\r\n    </v-overlay>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport TronWeb from 'tronweb'\r\nexport default {\r\n  name: 'Market',\r\n  components: {\r\n    \r\n  },\r\n  data: () => ({\r\n    overlay: false,\r\n    loading: false,\r\n    buy: 0,\r\n    fullNode: \"https://api.shasta.trongrid.io\",\r\n    solidityNode: \"https://api.shasta.trongrid.io\",\r\n    eventServer: \"https://api.shasta.trongrid.io\",\r\n    privateKey: '795b0060d28320d0348db4d9abfebe6629034de03c11a15cec8695cf3646302a',\r\n    //trc20ContractAddress: \"TF94ubDQo2cP78Utx4eEotp4iyBeBwNwpB\", //\"TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t\",\r\n    tr: true,\r\n    token: null,\r\n    contract: null,\r\n    tronWeb: null,\r\n    decimals: 1000000,\r\n    path: [\r\n      {src: require('@/assets/img/1.jpg'), title: 'Пакет 10$', summ: 10},\r\n      {src: require('@/assets/img/2.jpg'), title: 'Пакет 100$', summ: 100},\r\n      {src: require('@/assets/img/3.jpg'), title: 'Пакет 300$', summ: 300},\r\n      {src: require('@/assets/img/4.jpg'), title: 'Пакет 1000$', summ: 1000},\r\n      {src: require('@/assets/img/5.jpg'), title: 'Пакет 2500$', summ: 2500},\r\n      {src: require('@/assets/img/6.jpg'), title: 'Пакет 5000$', summ: 5000}\r\n    ]\r\n  }),\r\n  async mounted(){\r\n    this.tronWeb = new TronWeb(this.fullNode, this.solidityNode, this.eventServer, this.privateKey)\r\n    this.token = await this.tronWeb.contract().at(\"TYjsaL4BisZ3VMKGMti4ySvhBUYAyC14Tc\")\r\n    this.contract = await this.tronWeb.contract().at(\"TBCbUXaDek1v7dJMXouLNhMQRFckem42yC\")\r\n    \r\n  },\r\n  methods: {\r\n    async buyProduct(){\r\n      this.loading = true\r\n      this.overlay = false\r\n      this.loading = false\r\n      try {\r\n          await this.token.transfer('TBCbUXaDek1v7dJMXouLNhMQRFckem42yC', (this.buy * 1000000).toString()).send({\r\n              feeLimit:1_000_000_000,\r\n              callValue:0,\r\n              shouldPollResponse:true\r\n          })\r\n      } catch(error) {\r\n          console.error(\"trigger token error\",error)\r\n      }\r\n      try {\r\n          await this.contract.transfer().send({\r\n              feeLimit:1_000_000_000,\r\n              callValue:0,\r\n              shouldPollResponse:true\r\n          })\r\n      } catch(error) {\r\n          console.error(\"trigger smart contract error\",error)\r\n      }\r\n    },\r\n    openModal(summ){\r\n      this.overlay = !this.overlay\r\n      this.buy = summ\r\n    }\r\n  }\r\n}\r\n</script>"]}]}