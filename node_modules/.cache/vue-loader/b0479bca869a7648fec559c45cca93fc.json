{"remainingRequest":"/home/four/daoconsensus/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/four/daoconsensus/src/views/Network.vue?vue&type=style&index=0&id=1a53e9e4&lang=scss&scoped=true&","dependencies":[{"path":"/home/four/daoconsensus/src/views/Network.vue","mtime":1616665357000},{"path":"/home/four/daoconsensus/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/four/daoconsensus/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/four/daoconsensus/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/four/daoconsensus/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/four/daoconsensus/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/four/daoconsensus/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQouZmlsbCB7DQogIHdpZHRoOiAxMDAlOw0KICBoZWlnaHQ6IDEwMCU7DQogIHBhZGRpbmc6IDI1cHg7DQogIHBvc2l0aW9uOiByZWxhdGl2ZTsNCn0NCnN2ZyB7DQogIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKSB0cmFuc2xhdGVYKC01MCUpOw0KICBwYWRkaW5nOiA1cHg7DQp9DQouZWRnZXMgew0KICBwYXRoIHsNCiAgICBmaWxsOiBub25lOw0KICAgIC8vIHN0cm9rZTogI2ZmZjsNCiAgICAvLyBzdHJva2Utd2lkdGg6IDQ7DQogIH0NCn0NCg=="},{"version":3,"sources":["Network.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Network.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <div class=\"fill\">\r\n        <div id=\"curveOptions\">\r\n        <select v-model=\"selectedCurve\">\r\n            <option v-for=\"item in curveOptions\" :key=\"item\">{{ item }}</option>\r\n        </select>\r\n        </div>\r\n\r\n        <svg>\r\n        <g class=\"edges\">\r\n            <!-- <line v-for=\"(item, index) in links\"\r\n                :key=\"index\"\r\n                :x1=\"item.source.y\"\r\n                :y1=\"item.source.x\"\r\n                :x2=\"item.target.y\"\r\n                :y2=\"item.target.x\"\r\n                stroke=\"#fff\"\r\n                :stroke-width=\"item.target.height + 1\"></line> -->\r\n\r\n            <path\r\n            v-for=\"(link, i) in linkPaths\"\r\n            :key=\"i\"\r\n            :d=\"link\"\r\n            stroke=\"#fff\"\r\n            stroke-width=\"2\"\r\n            />\r\n        </g>\r\n        <g class=\"nodes\">\r\n            <D3HierarchyNode\r\n            v-for=\"(item, index) in descendants\"\r\n            :key=\"index + 'g'\"\r\n            :node-data=\"item\"\r\n            layout-type=\"partition\"\r\n            >\r\n            <circle\r\n                :cx=\"item.y\"\r\n                :cy=\"item.x\"\r\n                r=\"10\"\r\n                stroke=\"#fff\"\r\n                stroke-width=\"2\"\r\n                fill=\"green\"\r\n            >\r\n                <title>{{ item.data.name }} - {{ item.value }}</title>\r\n            </circle>\r\n            </D3HierarchyNode>\r\n\r\n            <path v-if=\"myPath\" :d=\"myPath._\" stroke=\"#fff\" stroke-width=\"3\" />\r\n        </g>\r\n        </svg>\r\n    </div>\r\n</template>\r\n<script>\r\nimport * as d3 from 'd3-hierarchy'\r\nimport * as shapes from 'd3-shape'\r\nimport { path } from 'd3-path'\r\nimport D3HierarchyNode from '@/components/D3HierarchyNode'\r\nwindow.d3 = d3\r\nexport default {\r\n  components: {\r\n    D3HierarchyNode\r\n  },\r\n  data() {\r\n    return {\r\n      dataset:       null,\r\n      size:          [500, 500],\r\n      theme:         'Spectral',\r\n      root:          null,\r\n      myPath:        new path(),\r\n      curveOptions:  Object.keys(shapes).filter(v => v.startsWith('curve')),\r\n      selectedCurve: 'curveStep'\r\n    }\r\n  },\r\n  props: {\r\n    vData: {\r\n      type: Array\r\n    }\r\n  },\r\n  computed: {\r\n    clusterLayout() {\r\n      return d3.tree().size(this.size.reverse())\r\n      // .nodeSize()\r\n    },\r\n    descendants() {\r\n      if (this.root) return this.root.descendants()\r\n    },\r\n    links() {\r\n      if (this.root) return this.root.links()\r\n      //  path.path().quadraticCurveTo()\r\n    },\r\n    linkPaths() {\r\n      if (this.links) {\r\n        const leafPaths = this.root.leaves().map(v => v.ancestors())\r\n        return leafPaths.map(v => {\r\n          const l = shapes\r\n            .line()\r\n            .curve(shapes[this.selectedCurve])\r\n            .x(vv => vv.y << 0)\r\n            .y(vv => vv.x << 0)\r\n          return l(v)\r\n          // .linkHorizontal()\r\n          // .source(v => [v.source.y, v.source.x])\r\n          // .target(v => [v.target.y, v.target.x])(v)\r\n        })\r\n      }\r\n    }\r\n  },\r\n  beforeMount() {\r\n    if (this.vData) {\r\n      this.$nextTick(() => {\r\n        const bounds = this.$el.querySelector('svg').getBoundingClientRect()\r\n        this.size = [bounds.width, bounds.height]\r\n        this.dataset = this.vData\r\n      })\r\n    } else {\r\n      this.$http.get(\r\n          [{\r\n            \"name\": \"Custodians\",\r\n            \"id\": null,\r\n            \"size\": 405,\r\n            \"y\": 0,\r\n            \"children\": [{\r\n                \"name\": \"No Custodian\",\r\n                \"id\": null,\r\n                \"size\": 405,\r\n                \"y\": 0,\r\n                \"children\": [{\r\n                    \"name\": \"MD-(03160.pst\",\r\n                    \"id\": null,\r\n                    \"size\": 195,\r\n                    \"y\": 0,\r\n                    \"children\": [{\r\n                    \"name\": \"Archive PST Store\",\r\n                    \"id\": null,\r\n                    \"size\": 195,\r\n                    \"y\": 0,\r\n                    \"children\": [{\r\n                        \"name\": \"Inbox\",\r\n                        \"id\": null,\r\n                        \"size\": 195,\r\n                        \"y\": 0,\r\n                        \"children\": [{\r\n                        \"name\": \"M\",\r\n                        \"id\": null,\r\n                        \"size\": 195,\r\n                        \"y\": 0,\r\n                        \"children\": null,\r\n                        \"data\": null,\r\n                        \"drilldown\": null,\r\n                        \"folderId\": 25,\r\n                        \"colorByPoint\": false\r\n                        }],\r\n                        \"data\": null,\r\n                        \"drilldown\": null,\r\n                        \"folderId\": 24,\r\n                        \"colorByPoint\": false\r\n                    }],\r\n                    \"data\": null,\r\n                    \"drilldown\": null,\r\n                    \"folderId\": 23,\r\n                    \"colorByPoint\": false\r\n                    }],\r\n                    \"data\": null,\r\n                    \"drilldown\": null,\r\n                    \"folderId\": 22,\r\n                    \"colorByPoint\": false\r\n                },\r\n                {\r\n                    \"name\": \"MD.PST\",\r\n                    \"id\": null,\r\n                    \"size\": 57,\r\n                    \"y\": 0,\r\n                    \"children\": [{\r\n                    \"name\": \"Archive PST Store\",\r\n                    \"id\": null,\r\n                    \"size\": 57,\r\n                    \"y\": 0,\r\n                    \"children\": [{\r\n                        \"name\": \"Inbox\",\r\n                        \"id\": null,\r\n                        \"size\": 57,\r\n                        \"y\": 0,\r\n                        \"children\": null,\r\n                        \"data\": null,\r\n                        \"drilldown\": null,\r\n                        \"folderId\": 28,\r\n                        \"colorByPoint\": false\r\n                        },\r\n                        {\r\n                        \"name\": \"Outbox\",\r\n                        \"id\": null,\r\n                        \"size\": 57,\r\n                        \"y\": 0,\r\n                        \"children\": null,\r\n                        \"data\": null,\r\n                        \"drilldown\": null,\r\n                        \"folderId\": 28,\r\n                        \"colorByPoint\": false\r\n                        }\r\n                    ],\r\n                    \"data\": null,\r\n                    \"drilldown\": null,\r\n                    \"folderId\": 27,\r\n                    \"colorByPoint\": false\r\n                    }],\r\n                    \"data\": null,\r\n                    \"drilldown\": null,\r\n                    \"folderId\": 26,\r\n                    \"colorByPoint\": false\r\n                },\r\n                {\r\n                    \"name\": \"MD.pst\",\r\n                    \"id\": null,\r\n                    \"size\": 153,\r\n                    \"y\": 0,\r\n                    \"children\": [{\r\n                        \"name\": \"Archive PST Store\",\r\n                        \"id\": null,\r\n                        \"size\": 153,\r\n                        \"y\": 0,\r\n                        \"children\": [{\r\n                        \"name\": \"Inbox\",\r\n                        \"id\": null,\r\n                        \"size\": 153,\r\n                        \"y\": 0,\r\n                        \"children\": [{\r\n                            \"name\": \"Dec16-31\",\r\n                            \"id\": null,\r\n                            \"size\": 153,\r\n                            \"y\": 0,\r\n                            \"children\": null,\r\n                            \"data\": null,\r\n                            \"drilldown\": null,\r\n                            \"folderId\": 32,\r\n                            \"colorByPoint\": false\r\n                        }],\r\n                        \"data\": null,\r\n                        \"drilldown\": null,\r\n                        \"folderId\": 31,\r\n                        \"colorByPoint\": false\r\n                        }],\r\n                        \"data\": null,\r\n                        \"drilldown\": null,\r\n                        \"folderId\": 30,\r\n                        \"colorByPoint\": false\r\n                    },\r\n                    {\r\n                        \"name\": \"Archive PST Store\",\r\n                        \"id\": null,\r\n                        \"size\": 153,\r\n                        \"y\": 0,\r\n                        \"children\": [{\r\n                        \"name\": \"Inbox\",\r\n                        \"id\": null,\r\n                        \"size\": 153,\r\n                        \"y\": 0,\r\n                        \"children\": [{\r\n                            \"name\": \"Dec16-31\",\r\n                            \"id\": null,\r\n                            \"size\": 153,\r\n                            \"y\": 0,\r\n                            \"children\": null,\r\n                            \"data\": null,\r\n                            \"drilldown\": null,\r\n                            \"folderId\": 32,\r\n                            \"colorByPoint\": false\r\n                        }],\r\n                        \"data\": null,\r\n                        \"drilldown\": null,\r\n                        \"folderId\": 31,\r\n                        \"colorByPoint\": false\r\n                        }],\r\n                        \"data\": null,\r\n                        \"drilldown\": null,\r\n                        \"folderId\": 30,\r\n                        \"colorByPoint\": false\r\n                    },\r\n                    {\r\n                        \"name\": \"Archive PST Store\",\r\n                        \"id\": null,\r\n                        \"size\": 153,\r\n                        \"y\": 0,\r\n                        \"children\": [{\r\n                        \"name\": \"Inbox\",\r\n                        \"id\": null,\r\n                        \"size\": 153,\r\n                        \"y\": 0,\r\n                        \"children\": [{\r\n                            \"name\": \"Dec16-31\",\r\n                            \"id\": null,\r\n                            \"size\": 153,\r\n                            \"y\": 0,\r\n                            \"children\": null,\r\n                            \"data\": null,\r\n                            \"drilldown\": null,\r\n                            \"folderId\": 32,\r\n                            \"colorByPoint\": false\r\n                        }],\r\n                        \"data\": null,\r\n                        \"drilldown\": null,\r\n                        \"folderId\": 31,\r\n                        \"colorByPoint\": false\r\n                        }],\r\n                        \"data\": null,\r\n                        \"drilldown\": null,\r\n                        \"folderId\": 30,\r\n                        \"colorByPoint\": false\r\n                    }\r\n                    ],\r\n                    \"data\": null,\r\n                    \"drilldown\": null,\r\n                    \"folderId\": 29,\r\n                    \"colorByPoint\": false\r\n                }\r\n                ],\r\n                \"data\": null,\r\n                \"drilldown\": null,\r\n                \"folderId\": 21,\r\n                \"colorByPoint\": false\r\n            }],\r\n            \"data\": null,\r\n            \"drilldown\": null,\r\n            \"folderId\": 20,\r\n            \"colorByPoint\": false\r\n            }]\r\n      ).then(res => {\r\n        this.$nextTick(() => {\r\n          const bounds = this.$el.querySelector('svg').getBoundingClientRect()\r\n          this.size = [bounds.width, bounds.height]\r\n          this.dataset = res.data[0]\r\n        })\r\n      })\r\n    }\r\n  },\r\n  watch: {\r\n    dataset: {\r\n      handler(val) {\r\n        if (val) {\r\n          this.root = d3.hierarchy(this.dataset).count()\r\n          // .sum(v => v.size)\r\n          // .sort((a, b) => b.size - a.size)\r\n          // .count()\r\n          this.root = this.clusterLayout(this.root)\r\n        }\r\n      },\r\n      immediate: true\r\n    }\r\n  },\r\n  methods: {\r\n    getNodeColor(item) {\r\n      // return a color depending if this is a leaf or not\r\n      if (item.data.leaf) {\r\n        return 'green'\r\n      } else {\r\n        return 'green'\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.fill {\r\n  width: 100%;\r\n  height: 100%;\r\n  padding: 25px;\r\n  position: relative;\r\n}\r\nsvg {\r\n  transform: translateY(-50%) translateX(-50%);\r\n  padding: 5px;\r\n}\r\n.edges {\r\n  path {\r\n    fill: none;\r\n    // stroke: #fff;\r\n    // stroke-width: 4;\r\n  }\r\n}\r\n</style>"]}]}